input_error = 'CSL file malformed: Custom("missing field `$value`")'

normalizations = [
  'Dropped the empty `<else>` branch in a macro (url-doi). [Follow CSL spec]',
]

# Adapted from https://github.com/zotero-chinese/styles/blob/ce0786d782f6c/src/北京理工大学/北京理工大学.csl
input_csl = '''
<?xml version='1.0' encoding='utf-8'?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0">
  <info>
    <id/>
    <title/>
  </info>
  <!-- 获取和访问路径以及 DOI -->
  <macro name="url-doi">
    <choose>
      <if variable="URL">
        <!-- <text variable="URL"/> -->
      </if>
      <else>
        <!-- <text variable="DOI" prefix="https://doi.org/"/> -->
      </else>
    </choose>
  </macro>
  <citation>
    <layout>
      <text value="irrelevant"/>
    </layout>
  </citation>
  <bibliography>
    <layout>
      <text value="irrelevant"/>
    </layout>
  </bibliography>
</style>'''

diff = '''
--- Original

+++ Sanitized

@@ -10,10 +10,7 @@

       <if variable="URL">
         <!-- <text variable="URL"/> -->
       </if>
-      <else>
-        <!-- <text variable="DOI" prefix="https://doi.org/"/> -->
-      </else>
-    </choose>
+      </choose>
   </macro>
   <citation>
     <layout>'''
